{% extends 'core/base.html' %}
{% load static %}

{% block cpub %}class = "active"{% endblock cpub %}

{% block content %}
<span id="header_shadow"></span>
		<!-- /TOP NAV -->


		<!-- WRAPPER -->
		<div id="wrapper">

			<div id="blog">

				<!-- PAGE TITLE -->
				<header id="page-title">
					<div class="container">
						<h1>Publications</h1>

						<ul class="breadcrumb">
							<li><a href="{% url 'index' %}">Accueil</a></li>
							<li class="active">Publications</li>
						</ul>
					</div>
				</header>

				<section class="container">

					<span class="js_loader"><i class="fa fa-asterisk fa-spin"></i>CHARGEMENT EN COURS...</span>

					<ul class="masonry-list">

						{% for p in posts %}

						<li class="masonry-item">

							<div class="item">

								<div class="item-title">
									<h2><a href="{{ p.url }}">{{ p.title|truncatechars:50 }}</a></h2>
									<a href="{{ p.url }}" class="label label-default light"><i class="fa fa-dot-circle-o"></i> {{ p.tag }}</a> 
									<span class="label label-default light">{{ p.date|date:"M d, Y" }}</span> 
								</div>

								<figure>
									<a href="{{ p.url }}">
                                       <img class="img-responsive" src="{{ p.image }}" width="260" height="260" alt="">
								    </a>
								</figure>

								<p>
									{{ p.text|truncatechars:200 }}
								</p>

							</div>

						</li>

						{% endfor %}
                        
                        
                        
					</ul>

				</section>

			</div>
			<div class="row">
								<div class="text-center">

						            {% if posts.has_other_pages %}
						              <ul class="pagination justify-content-center m-15px-t">
						                {% if posts.has_previous %}
						                  <li class="page-item"><a class="page-link" href="?page={{ posts.previous_page_number }}"><i class="fa fa-chevron-left"></i></a></li>
						                {% else %}
						                  <!--<li class="disabled"><span><i class="fas fa-chevron-left"></i></span></li>-->
						                {% endif %}
						                {% for i in posts.paginator.page_range %}
						                  {% if posts.number == i %}
						                    <li class="page-item active"><a class="page-link"><span>{{ i }} <span class="sr-only">(current)</span></span></a></li>
						                  {% else %}
						                    <li><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
						                  {% endif %}
						                {% endfor %}
						                {% if posts.has_next %}
						                  <li class="page-item"><a class="page-link" href="?page={{ posts.next_page_number }}"><i class="fa fa-chevron-right"></i></a></li>
						                {% else %}
						                  <!--<li class="disabled"><span><i class="fas fa-chevron-right"></i></span></li>-->
						                {% endif %}
						              </ul>
						            {% endif %}
        					</div>
		</div>
		<!-- /WRAPPER -->


{% endblock content %}

{% block latestposts %}
{% for p in lposts %}
<div class="post-item">
	<small>{{ p.date|date:"M d, Y" }}</small>
	<h3><a href="blog-single-sidebar-left.html">{{ p.title }}</a></h3>
</div>
{% endfor %}

{% endblock latestposts %}